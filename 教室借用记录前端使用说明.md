# 教室借用记录前端使用说明

## 概述

前端已成功集成教室借用记录相关的所有功能，包括记录查询、统计信息展示、实时状态监控等。前端可以正常调用后端接口，实现完整的教室借用记录管理功能。

## 功能模块

### 1. 教室借用记录列表 (`AccessClassroomRecords.vue`)

**功能特性：**
- ✅ 调用 `getAccessRecords` API 获取真实数据
- ✅ 支持楼栋/区域筛选
- ✅ 支持基础信息搜索（姓名/工号/联系方式）
- ✅ 支持时间范围筛选
- ✅ 支持开门方式和通行类型筛选
- ✅ 实现真实的分页功能
- ✅ 支持导出当前页和全部数据
- ✅ 加载状态显示

**API调用：**
```javascript
// 获取记录列表
const response = await getAccessRecords({
  pageNum: 1,
  pageSize: 10,
  areaId: 'area123',
  basicInfo: '张三',
  startTime: '2024-08-01 00:00:00',
  endTime: '2024-08-31 23:59:59',
  openMethod: '刷卡',
  accessType: '预约权限'
})

// 导出记录
const exportResponse = await exportAccessRecords({
  exportType: 'current', // 或 'all'
  pageNum: 1,
  pageSize: 10,
  // ... 其他筛选条件
})
```

### 2. 统计信息展示 (`AccessStatsCard.vue`)

**功能特性：**
- ✅ 调用 `getAccessStats` API 获取统计数据
- ✅ 支持时间范围筛选
- ✅ 展示总览数据（总记录数、今日记录数、使用教室数、使用人数）
- ✅ 展示分布统计（通行类型、开门方式、用户类型）
- ✅ 响应式卡片布局

**API调用：**
```javascript
// 获取统计信息
const response = await getAccessStats({
  startTime: '2024-08-01 00:00:00',
  endTime: '2024-08-31 23:59:59',
  areaId: 'area123'
})
```

### 3. 教室实时状态 (`RoomStatusCard.vue`)

**功能特性：**
- ✅ 调用 `getRoomStatus` API 获取实时状态
- ✅ 支持区域筛选
- ✅ 自动刷新（30秒间隔）
- ✅ 状态概览（使用中/空闲/总计）
- ✅ 教室卡片展示（包含当前预约信息）
- ✅ 智能时间显示（刚刚、几分钟前等）

**API调用：**
```javascript
// 获取教室状态
const response = await getRoomStatus('area123')
```

### 4. 集成管理页面 (`ClassroomRecordsManagement.vue`)

**功能特性：**
- ✅ 标签页切换展示不同功能模块
- ✅ 统一的页面布局和导航
- ✅ 响应式设计

## 文件结构

```
src/
├── api/
│   └── roomBookingManagement.js          # API 方法和常量定义
├── components/
│   └── RoomBooking/
│       ├── Records/
│       │   └── AccessClassroomRecords.vue # 借用记录列表
│       ├── Stats/
│       │   └── AccessStatsCard.vue        # 统计信息卡片
│       └── Status/
│           └── RoomStatusCard.vue         # 实时状态卡片
└── views/
    └── ClassroomRecordsManagement.vue     # 管理页面
```

## API 接口对应

| 前端方法 | 后端接口 | 说明 |
|---------|---------|------|
| `getAccessRecords()` | `POST /api/room-booking/access-records` | 获取借用记录列表 |
| `exportAccessRecords()` | `POST /api/room-booking/access-records/export` | 导出借用记录 |
| `getAccessStats()` | `GET /api/room-booking/access-records/stats` | 获取统计信息 |
| `getRoomStatus()` | `GET /api/room-booking/access-records/room-status` | 获取实时状态 |

## 使用方法

### 1. 在路由中使用

```javascript
// router/index.js
{
  path: '/classroom-records',
  name: 'ClassroomRecords',
  component: () => import('@/views/ClassroomRecordsManagement.vue')
}
```

### 2. 单独使用组件

```vue
<template>
  <div>
    <!-- 借用记录列表 -->
    <AccessClassroomRecords />
    
    <!-- 统计信息 -->
    <AccessStatsCard />
    
    <!-- 实时状态 -->
    <RoomStatusCard />
  </div>
</template>

<script setup>
import AccessClassroomRecords from '@/components/RoomBooking/Records/AccessClassroomRecords.vue'
import AccessStatsCard from '@/components/RoomBooking/Stats/AccessStatsCard.vue'
import RoomStatusCard from '@/components/RoomBooking/Status/RoomStatusCard.vue'
</script>
```

## 数据流说明

1. **组件挂载时**：自动调用对应的API获取初始数据
2. **用户操作时**：
   - 筛选条件变化 → 重新调用API获取数据
   - 分页操作 → 调用API获取对应页数据
   - 导出操作 → 调用导出API
   - 刷新操作 → 重新获取最新数据

3. **错误处理**：
   - API调用失败时显示错误提示
   - 加载状态显示
   - 空数据状态处理

## 特色功能

### 1. 智能筛选
- 支持多条件组合筛选
- 实时搜索（防抖处理）
- 筛选条件持久化

### 2. 实时更新
- 教室状态每30秒自动刷新
- 支持手动刷新
- 时间显示智能格式化

### 3. 用户体验
- 加载状态指示
- 响应式布局适配
- 操作反馈提示

## 注意事项

1. **后端依赖**：确保后端服务正常运行且接口可访问
2. **权限控制**：根据用户权限控制功能可见性
3. **数据量**：大量数据时建议使用分页和筛选
4. **刷新频率**：可根据实际需求调整自动刷新间隔

## 编译状态

✅ 前端代码编译成功，无任何错误
✅ 所有组件正确导入和使用
✅ API调用逻辑完整实现
✅ 响应式布局和样式正常

教室借用记录前端功能已完全实现并可正常使用！